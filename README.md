# IoT： Realtime GPS Tracking System

This project revolves around GPS positioning. The purpose is to observe the user's positioning status, and to detect changes in speed and position in real time, so that users can have a security guarantee in specific occasions or in specific environments. This experiment should be divided into 3 major sections, GPS connection, real-time upload of GPS data to SD-card, and real-time upload of GPS data to Google Firebase under the condition of network.

**Key words: Arduino Nano 33 IoT, GPS BN-220, SD Card Reader Adapter, Google Firebase**

# Introduction

With the technology developing, GPS has been deeply integrated into our life, whether it is driving or checking tourist attractions. There are many GPS modules, in this experiment, we choose the BN-220 module. Through the combination of GPS BN-220 module and Arduino nano 33 IoT, we can also interact with GPS data. The ultimate purpose of our experiment is to collect the user's location in real time, and the data can be sent to Google firebase when there is a network (and a backup of the data to the SD card). However, when the network is missing or the network signal is weak, we can also record the data in the SD card. We use the concept of IoT with Google firebase to observe Realtime data collected by positioning GPS in time. As an integrated hardware and software system, it improves system accuracy and reduces overall power consumption. This article is divided into four parts, including the design concept, hardware selection, research results, and difficulties in the experiments. 

------------------------------

Table of Contents

------------------------------

- [Overview of Arduino Nano 33 IoT](#Overview-of-Arduino-Nano-33-IoT)
- [Design and Configuration](#Design-and-Configuration)
    - [Proposed system & Design Ideas](#a.Proposed-system-&-Design-Ideas)
    - [Hardware selection](#b.Hardware-selection)


# Overview of Arduino Nano 33 IoT

The Arduino Nano 33 IoT is the easiest and cheapest entry point to enhance existing devices to become part of IoT and design piconet applications. This section will summarize the two major features of Arduino: Wi-Fi module and main processor.

<div align=center>
<img src="https://cdn.shopify.com/s/files/1/0506/1689/3647/products/ABX00027_03.front_643x483.jpg?v=1626445295"  width="350px" /> 
  </div>

<p align="center">Figure 1 Arduino Nano 33 IoT</p>
  
The board's main processor is a 32-bit SAMD21. It runs at a maximum frequency of 48MHz and achieves 2.46 CoreMark®/MHz. They are designed for easy and intuitive migration, with the same peripheral modules. Therefore, during the initial stage of the whole experiment, we installed Arduino SAMD Core by using Boards Manager on the Arduino professional software according to the specification and number of the NANO33's processor. Figure 2 shows Boards Manger which includes NANO 33 installation.

<div align=center>
<img src="https://github.com/manzitlo/IoT-Realtime-GPS-Tracking-System/blob/main/images/Installation%20of%20SAMD%20Board.png"  width="550px" /> 
  </div>
  
<p align="center">Figure 2 Installation of SAMD Board</P>


The Wi-Fi and Bluetooth connections of Arduino Nano 33 IoT are performed by u-blox's module NINA-W10, a low-power chipset operating in the 2.4GHz range. For this reason, the Arduino is particularly easy to connect to a Wi-Fi network. Designer can connect the development board to any type of existing Wi-Fi network or use it to create your own Arduino access point. During the experiment, we tried to use an iPhone create a mobile hotspot, and the experimental results showed that the Arduino WIFI module is also possible to connect to the iPhone hotspot. In this experiment, in order to enable network connection (Local and Internet), we first need a certain library package to assist, this is WIFININA. By using this library, designers can instantiate servers, clients and send/receive UDP packets over Wi-Fi. The board can be connected to open or encrypted networks (WEP, WPA). IP addresses can be assigned statically or via DHCP. Figure 3 shows the installation of WIFININA at Library Manager.

<div align=center>
<img src="https://github.com/manzitlo/IoT-Realtime-GPS-Tracking-System/blob/main/images/Installation%20of%20WIFI%20NINA%20library.png" width="550px" />
</div>

<p align="center">Figure 3 Installation of WIFI NINA library</p>

# Design and Configuration

## a. Proposed system & Design Ideas

<div align=center>
<img src="https://github.com/manzitlo/IoT-Realtime-GPS-Tracking-System/blob/main/images/Proposed%20System.png" width="350px" />
</div>
<p align="center">Figure 4 Proposed System</p>

We have learned how to display hardware data on OLED (such as reading temperature/humidity or time countdown by coding setting, etc.), but facing the data generated by GPS, the goal of the experiment is to be able to adjust the user's latitude and longitude coordinates, as well as the coordinates of their movement frequency, as a data gathering object. Following this logical purpose, our group's initial aim is to try to create a program that can read GPS and save information to an SD card in txt format. After selecting the appropriate card reader module, we began to consider trying to interact with the google firebase platform, in order to be able to log in to firebase through computers and mobile phones to observe the real-time status of users. Therefore, the design concept is when there is a network, SD card records the real-time positioning status every second (at the same time uploading GPS data to Google Firebase, so that observers can observe the changes of real-time data through the website and analyze the user status); when there is no network, the data is simply recorded in the SD card.

## b. Hardware selection

### [1] GPS BN-220
In the choice of GPS module, we use Beitian's BN-220. The BN-220 GPS module has a TTL dual GPS Glonass navigation system, as well as a flash + GPS passive antenna. At the same time, the BN220 GPS module offers a significant advantage: it features a flash memory that saves the setup, eliminating the need to re-enter the data. 

<div align=center>
<img src="https://github.com/manzitlo/IoT-Realtime-GPS-Tracking-System/blob/main/images/Hardware%20of%20BN-220%20(Pin%20Description).png" width=350px" />
</div>
<p align="center">Figure 5 Hardware of BN-220 (Pin Description)</p>

### [2] Pin distribution on the back of OLED
Regarding the choice of OLED module, we chose the 0.96" OLED display module produced by UCTRONICS, its advantage is that the screen size meets our experimental requirements, and it is suitable for Arduino, its specifications are: 12864 128x64 pixels SSD1306 I2C serial mini screen, it contains yellow and blue.

